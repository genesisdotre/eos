<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Learning</title>
<!--     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.js"></script>     -->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">

    <link rel="stylesheet" href="styles.css">

    <script src="./lib/jquery.min.js"></script>
    <script src="./lib/angular.min.js"></script>

    <!-- 
      this may seem redundant, as Web3 can be injected by MetaMask BUT in case of no MetaMask no simple way including it, see also:
        * https://stackoverflow.com/questions/8085111/how-to-include-a-remote-javascript-file-conditionally
        * https://stackoverflow.com/questions/14783046/using-getscript-synchronously
    -->
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>


  </head>
  <body>
  

      <div ng-app="app" ng-controller="ctrl">

        <h3>Address: {{ address }}</h3>
        <h3>Auction: {{ description }}</h3>
        <h3>Time to end: {{ timestampEnd }}</h3>

        <table>
          <tr>
            <th>account</th><th>bid</th>
          </tr>
          <tr ng-repeat="account in accounts| orderBy:'bid':true">
            <td>{{ account.address }}</td>
            <td>{{ account.bid.toFixed(2) }}</td>
          </tr>
        </table>        


        <span ng-show="$root.metamask">
          <h3>More detailed info</h3>

          <table>
            <tr>
              <th>account</th><th>bid</th><th>timestamp</th><th>tx</th><th>block</th>
            </tr>
            <tr ng-repeat="bid in bids">
              <td>{{ bid.bidder }}</td>
              <td>{{ bid.price.toFixed(2) }}</td>
              <td>{{ bid.timestamp }}</td>
              <td><a href="https://ropsten.etherscan.io/tx/{{ bid.tx }}">{{ bid.tx }}</a></td>
              <td><a href="https://ropsten.etherscan.io/block/{{ bid.block }}">{{ bid.block }}</a></td>
            </tr>
          </table>          


          <h3>Guaranteed bids</h3>
          <table>
            <tr>
              <th>account</th><th>bid</th><th>timestamp</th><th>tx</th><th>block</th>
            </tr>
            <tr ng-repeat="bid in guranteedBids">
              <td>{{ bid.bidder }}</td>
              <td>{{ bid.price.toFixed(2) }}</td>
              <td>{{ bid.timestamp }}</td>
              <td><a href="https://ropsten.etherscan.io/tx/{{ bid.tx }}">{{ bid.tx }}</a></td>
              <td><a href="https://ropsten.etherscan.io/block/{{ bid.block }}">{{ bid.block }}</a></td>
            </tr>
          </table>          


          <h3>Refunds</h3>
          <table>
            <tr>
              <th>account</th><th>bid</th><th>timestamp</th><th>tx</th><th>block</th>
            </tr>
            <tr ng-repeat="bid in refunds">
              <td>{{ bid.bidder }}</td>
              <td>{{ bid.price.toFixed(2) }}</td>
              <td>{{ bid.timestamp }}</td>
              <td><a href="https://ropsten.etherscan.io/tx/{{ bid.tx }}">{{ bid.tx }}</a></td>
              <td><a href="https://ropsten.etherscan.io/block/{{ bid.block }}">{{ bid.block }}</a></td>
            </tr>
          </table>







        </span>


        http://bit.ly/casacrypto
        https://t.me/CasaCryptoIbiza


        <span ng-show="! $root.metamask">
          <h3>Metamask required to obtain more data</h3>
          <p>See <a href="https://github.com/INFURA/infura/issues/13#issuecomment-405077145">this</a> and <a href="https://github.com/INFURA/infura/issues/73#issuecomment-405078968">that</a> GitHub issue. I'm not the smartest, not the most experienced Ethereum programmer on this planet and I've wasted (invested) enough time trying to get it to work. Just install MetaMask babe for full functionality, can you imagine, we are still in technology early days, internet in 1996.</p>
          <img src="images/metamask.jpg">
        </span>

      </div>
    </div>

     <script src="app.js"></script>
  </body>
</html>

